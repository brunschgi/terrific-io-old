{% extends 'TerrificCoreBundle::base.html.twig' %}

{% block title %}Terrific Composer{% endblock %}

{% block styles %}
    {% stylesheets
        '@TerrificComposition/Resources/public/css/bootstrap/bootstrap.less'
        '@TerrificComposition/Resources/public/css/bootstrap/responsive.less'
        '@TerrificComposition/Resources/public/css/codemirror/theme/monokai.css'
        '@TerrificComposition/Resources/public/css/elements.less'
        output="css/compiled/project.css"
    %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}

    {# styles from parent (terrific core) layout #}
    {{ parent() }}
{% endblock %}

{% block scripts %}
    {% javascripts
      '@TerrificComposition/Resources/public/js/underscore-min.js'
      '@TerrificComposition/Resources/public/js/backbone-min.js'
       output='js/compiled/backbone.js'
    %}
        <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}

    {% javascripts
      '@TerrificComposition/Resources/public/js/models/init.js'
      '@TerrificComposition/Resources/public/js/models/blueprint/*.js'
      '@TerrificComposition/Resources/public/js/models/model.js'
       output='js/compiled/models.js'
    %}
        <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}

    {# scripts from parent (terrific core) layout #}
    {{ parent() }}

    {% javascripts
      '@TerrificComposition/Resources/public/js/codemirror/mode/*/*.js'
       output='js/compiled/modes.js'
    %}
        <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}
{% endblock %}

{# set the body class -> e.g. global module #}
{% block body_class %}{% endblock %}

{# content that is the same on every page (ie. logo) goes into composition #}
{% block composition %}

{# your page content goes into body #}
{% block body %}
{% endblock %}

{% endblock %}

{# terrificjs bootstrap #}
{% block bootstrap %}
    <script type="text/javascript">
        (function($) {
            $(document).ready(function() {
                var $page = $('html'),
                    config = {
                        dependencyPath: {
                            js: '{{ app.request.basepath }}/js/dependencies/',
                            css: '{{ app.request.basepath }}/css/dependencies/'
                        }
                    },
                    application = new Tc.Application($page, config);

                application.registerModules();
                application.start();
            });
        })(Tc.$);
    </script>
{% endblock %}
